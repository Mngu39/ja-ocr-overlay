<!-- (텍스트 번역기/기존 리포에서 쓰던 DB 스크립트들이 먼저 로드됨) -->

<script>
  // === Kanji DB 호환 셈 ===
  (function(){
    // 후보 이름들을 최대한 포괄 (네 리포에서 쓰던 이름을 여기에 더 추가해도 됨)
    const candAnki = window.__ANKI_KANJI || window.KANJI_ANKI || window.ANKI_KANJI || window.ANKI_DB || window.ANKI;
    const candStd  = window.__KANJI_DB   || window.KANJI_DB   || window.JP_KANJI_DB || window.KANJI;

    // 최종 표준 전역명으로 바인딩
    if (!window.__ANKI_KANJI && candAnki) window.__ANKI_KANJI = candAnki;
    if (!window.__KANJI_DB   && candStd)  window.__KANJI_DB   = candStd;

    // 간단한 유효성 체크(모든 키가 한 글자 한자인지 대략 검증)
    const isKanjiMap = obj => obj && typeof obj==='object'
      && Object.keys(obj).slice(0,30).every(k => typeof k==='string' && k.length===1 && /[\u4E00-\u9FFF]/.test(k));
    if (window.__ANKI_KANJI && !isKanjiMap(window.__ANKI_KANJI)) console.warn('[KANJI] __ANKI_KANJI 구조가 예상과 다릅니다.');
    if (window.__KANJI_DB   && !isKanjiMap(window.__KANJI_DB))   console.warn('[KANJI] __KANJI_DB 구조가 예상과 다릅니다.');
  })();
</script>

<!-- 그리고 나서 앱 코드 -->
<script type="module" src="./src/app.js"></script>
